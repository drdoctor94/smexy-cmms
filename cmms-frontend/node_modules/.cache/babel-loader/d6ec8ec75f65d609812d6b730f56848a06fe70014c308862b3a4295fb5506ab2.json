{"ast":null,"code":"var _jsxFileName = \"/Users/haxordee/smexy-cmms/cmms-frontend/src/pages/Login.js\",\n  _s = $RefreshSig$();\n// src/pages/Login.js\n\nimport React, { useState, useContext } from 'react';\nimport { Avatar, Button, TextField, FormControlLabel, Checkbox, Grid, Box, Typography, Container, Alert } from '@mui/material';\nimport LockOutlinedIcon from '@mui/icons-material/LockOutlined';\nimport { useNavigate } from 'react-router-dom';\nimport axios from '../api/axiosConfig';\nimport { AuthContext } from '../context/AuthContext'; // Import AuthContext\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Login = () => {\n  _s();\n  const [credentials, setCredentials] = useState({\n    username: '',\n    password: ''\n  });\n  const [errorMsg, setErrorMsg] = useState('');\n  const navigate = useNavigate();\n  const {\n    login\n  } = useContext(AuthContext); // Access the login function\n\n  const handleChange = e => setCredentials({\n    ...credentials,\n    [e.target.name]: e.target.value\n  });\n  const handleSubmit = async e => {\n    e.preventDefault();\n    try {\n      const response = await axios.post('/api/auth/login', credentials);\n      const {\n        token,\n        user\n      } = response.data;\n\n      // Save token to localStorage\n      localStorage.setItem('token', token);\n\n      // Update auth state\n      login(user);\n\n      // Redirect to the dashboard\n      navigate('/');\n    } catch (error) {\n      var _error$response, _error$response$data;\n      setErrorMsg(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || 'Login failed');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Container, {\n    component: \"main\",\n    maxWidth: \"xs\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 5\n  }, this);\n};\n_s(Login, \"kD+z4+tcJ9h45p1poqD/KU+rUxY=\", false, function () {\n  return [useNavigate];\n});\n_c = Login;\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useState","useContext","Avatar","Button","TextField","FormControlLabel","Checkbox","Grid","Box","Typography","Container","Alert","LockOutlinedIcon","useNavigate","axios","AuthContext","jsxDEV","_jsxDEV","Login","_s","credentials","setCredentials","username","password","errorMsg","setErrorMsg","navigate","login","handleChange","e","target","name","value","handleSubmit","preventDefault","response","post","token","user","data","localStorage","setItem","error","_error$response","_error$response$data","message","component","maxWidth","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/haxordee/smexy-cmms/cmms-frontend/src/pages/Login.js"],"sourcesContent":["// src/pages/Login.js\n\nimport React, { useState, useContext } from 'react';\nimport {\n  Avatar,\n  Button,\n  TextField,\n  FormControlLabel,\n  Checkbox,\n  Grid,\n  Box,\n  Typography,\n  Container,\n  Alert,\n} from '@mui/material';\nimport LockOutlinedIcon from '@mui/icons-material/LockOutlined';\nimport { useNavigate } from 'react-router-dom';\nimport axios from '../api/axiosConfig';\nimport { AuthContext } from '../context/AuthContext'; // Import AuthContext\n\nconst Login = () => {\n  const [credentials, setCredentials] = useState({ username: '', password: '' });\n  const [errorMsg, setErrorMsg] = useState('');\n  const navigate = useNavigate();\n  const { login } = useContext(AuthContext); // Access the login function\n\n  const handleChange = (e) =>\n    setCredentials({ ...credentials, [e.target.name]: e.target.value });\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    try {\n      const response = await axios.post('/api/auth/login', credentials);\n      const { token, user } = response.data;\n\n      // Save token to localStorage\n      localStorage.setItem('token', token);\n\n      // Update auth state\n      login(user);\n\n      // Redirect to the dashboard\n      navigate('/');\n    } catch (error) {\n      setErrorMsg(error.response?.data?.message || 'Login failed');\n    }\n  };\n\n  return (\n    <Container component=\"main\" maxWidth=\"xs\">\n      {/* ... rest of your component */}\n    </Container>\n  );\n};\n\nexport default Login;\n"],"mappings":";;AAAA;;AAEA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,UAAU,QAAQ,OAAO;AACnD,SACEC,MAAM,EACNC,MAAM,EACNC,SAAS,EACTC,gBAAgB,EAChBC,QAAQ,EACRC,IAAI,EACJC,GAAG,EACHC,UAAU,EACVC,SAAS,EACTC,KAAK,QACA,eAAe;AACtB,OAAOC,gBAAgB,MAAM,kCAAkC;AAC/D,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,OAAOC,KAAK,MAAM,oBAAoB;AACtC,SAASC,WAAW,QAAQ,wBAAwB,CAAC,CAAC;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAEtD,MAAMC,KAAK,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAClB,MAAM,CAACC,WAAW,EAAEC,cAAc,CAAC,GAAGrB,QAAQ,CAAC;IAAEsB,QAAQ,EAAE,EAAE;IAAEC,QAAQ,EAAE;EAAG,CAAC,CAAC;EAC9E,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGzB,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM0B,QAAQ,GAAGb,WAAW,CAAC,CAAC;EAC9B,MAAM;IAAEc;EAAM,CAAC,GAAG1B,UAAU,CAACc,WAAW,CAAC,CAAC,CAAC;;EAE3C,MAAMa,YAAY,GAAIC,CAAC,IACrBR,cAAc,CAAC;IAAE,GAAGD,WAAW;IAAE,CAACS,CAAC,CAACC,MAAM,CAACC,IAAI,GAAGF,CAAC,CAACC,MAAM,CAACE;EAAM,CAAC,CAAC;EAErE,MAAMC,YAAY,GAAG,MAAOJ,CAAC,IAAK;IAChCA,CAAC,CAACK,cAAc,CAAC,CAAC;IAClB,IAAI;MACF,MAAMC,QAAQ,GAAG,MAAMrB,KAAK,CAACsB,IAAI,CAAC,iBAAiB,EAAEhB,WAAW,CAAC;MACjE,MAAM;QAAEiB,KAAK;QAAEC;MAAK,CAAC,GAAGH,QAAQ,CAACI,IAAI;;MAErC;MACAC,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEJ,KAAK,CAAC;;MAEpC;MACAV,KAAK,CAACW,IAAI,CAAC;;MAEX;MACAZ,QAAQ,CAAC,GAAG,CAAC;IACf,CAAC,CAAC,OAAOgB,KAAK,EAAE;MAAA,IAAAC,eAAA,EAAAC,oBAAA;MACdnB,WAAW,CAAC,EAAAkB,eAAA,GAAAD,KAAK,CAACP,QAAQ,cAAAQ,eAAA,wBAAAC,oBAAA,GAAdD,eAAA,CAAgBJ,IAAI,cAAAK,oBAAA,uBAApBA,oBAAA,CAAsBC,OAAO,KAAI,cAAc,CAAC;IAC9D;EACF,CAAC;EAED,oBACE5B,OAAA,CAACP,SAAS;IAACoC,SAAS,EAAC,MAAM;IAACC,QAAQ,EAAC;EAAI;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAE9B,CAAC;AAEhB,CAAC;AAAChC,EAAA,CAjCID,KAAK;EAAA,QAGQL,WAAW;AAAA;AAAAuC,EAAA,GAHxBlC,KAAK;AAmCX,eAAeA,KAAK;AAAC,IAAAkC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
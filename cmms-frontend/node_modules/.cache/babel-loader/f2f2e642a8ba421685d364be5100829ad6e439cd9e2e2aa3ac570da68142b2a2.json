{"ast":null,"code":"import React,{useState}from'react';import{Button,TextField,Dialog,DialogActions,DialogContent,DialogContentText,DialogTitle,MenuItem}from'@mui/material';import axios from'../api/axiosConfig';// Ensure this is the correct import for making API requests\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const taskTypes=['Clean Up / Spill','Cooling Issue','Electrical Issue','Equipment Repairs','Fire Safety','General Maintenance Request','Health and Safety','Heating Issues','Lighting Issues','Mechanical Issues','Painting / Touch Ups','Pest Control','Plumbing Issues','Waste Issues'];const priorities=['Low','Medium','High'];const WorkOrderFormModal=_ref=>{let{open,handleClose,onWorkOrderSubmit}=_ref;// Include onWorkOrderSubmit prop\nconst[formData,setFormData]=useState({taskType:'',roomNumber:'',details:'',priority:'',attachments:null});// Function to handle form changes\nconst handleChange=e=>{setFormData({...formData,[e.target.name]:e.target.value});};// Handle file uploads\nconst handleFileChange=e=>{setFormData({...formData,attachments:e.target.files[0]});};// Handle form submission\nconst handleSubmit=async()=>{// Perform validation (you can add more validation logic here)\nif(!formData.roomNumber||!formData.details||!formData.priority){alert('Please fill out all required fields.');return;}try{const formDataToSend=new FormData();formDataToSend.append('taskType',formData.taskType);formDataToSend.append('roomNumber',formData.roomNumber);formDataToSend.append('details',formData.details);formDataToSend.append('priority',formData.priority);if(formData.attachments){formDataToSend.append('attachments',formData.attachments);}// POST request to backend to create a new work order\nawait axios.post('/api/work-orders',formDataToSend,{headers:{'Content-Type':'multipart/form-data'}});// Handle success\nalert('Work order created successfully!');handleClose();// Close the modal\nonWorkOrderSubmit();// Refresh work orders list after submission\n}catch(error){console.error('Error submitting the work order:',error);alert('Failed to create the work order. Please try again.');}};return/*#__PURE__*/_jsxs(Dialog,{open:open,onClose:handleClose,children:[/*#__PURE__*/_jsx(DialogTitle,{children:\"Create New Work Order\"}),/*#__PURE__*/_jsxs(DialogContent,{children:[/*#__PURE__*/_jsx(DialogContentText,{children:\"Please fill out the form to create a new work order.\"}),/*#__PURE__*/_jsx(TextField,{select:true,label:\"Task Type\",name:\"taskType\",value:formData.taskType,onChange:handleChange,fullWidth:true,margin:\"normal\",children:taskTypes.map(option=>/*#__PURE__*/_jsx(MenuItem,{value:option,children:option},option))}),/*#__PURE__*/_jsx(TextField,{label:\"Room Number\",name:\"roomNumber\",value:formData.roomNumber,onChange:handleChange,required:true,fullWidth:true,margin:\"normal\"}),/*#__PURE__*/_jsx(TextField,{label:\"Details\",name:\"details\",value:formData.details,onChange:handleChange,required:true,fullWidth:true,multiline:true,rows:4,margin:\"normal\"}),/*#__PURE__*/_jsx(TextField,{select:true,label:\"Priority\",name:\"priority\",value:formData.priority,onChange:handleChange,required:true,fullWidth:true,margin:\"normal\",children:priorities.map(option=>/*#__PURE__*/_jsx(MenuItem,{value:option,children:option},option))}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"attachments\",onChange:handleFileChange,style:{marginTop:'15px'}})]}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:handleClose,color:\"secondary\",children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{onClick:handleSubmit,color:\"primary\",children:\"Submit\"})]})]});};export default WorkOrderFormModal;","map":{"version":3,"names":["React","useState","Button","TextField","Dialog","DialogActions","DialogContent","DialogContentText","DialogTitle","MenuItem","axios","jsx","_jsx","jsxs","_jsxs","taskTypes","priorities","WorkOrderFormModal","_ref","open","handleClose","onWorkOrderSubmit","formData","setFormData","taskType","roomNumber","details","priority","attachments","handleChange","e","target","name","value","handleFileChange","files","handleSubmit","alert","formDataToSend","FormData","append","post","headers","error","console","onClose","children","select","label","onChange","fullWidth","margin","map","option","required","multiline","rows","type","style","marginTop","onClick","color"],"sources":["/Users/haxordee/smexy-cmms/cmms-frontend/src/pages/WorkOrderFormModal.js"],"sourcesContent":["import React, { useState } from 'react';\nimport {\n  Button,\n  TextField,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n  MenuItem,\n} from '@mui/material';\nimport axios from '../api/axiosConfig'; // Ensure this is the correct import for making API requests\n\nconst taskTypes = [\n  'Clean Up / Spill',\n  'Cooling Issue',\n  'Electrical Issue',\n  'Equipment Repairs',\n  'Fire Safety',\n  'General Maintenance Request',\n  'Health and Safety',\n  'Heating Issues',\n  'Lighting Issues',\n  'Mechanical Issues',\n  'Painting / Touch Ups',\n  'Pest Control',\n  'Plumbing Issues',\n  'Waste Issues',\n];\n\nconst priorities = ['Low', 'Medium', 'High'];\n\nconst WorkOrderFormModal = ({ open, handleClose, onWorkOrderSubmit }) => {  // Include onWorkOrderSubmit prop\n  const [formData, setFormData] = useState({\n    taskType: '',\n    roomNumber: '',\n    details: '',\n    priority: '',\n    attachments: null,\n  });\n\n  // Function to handle form changes\n  const handleChange = (e) => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value,\n    });\n  };\n\n  // Handle file uploads\n  const handleFileChange = (e) => {\n    setFormData({\n      ...formData,\n      attachments: e.target.files[0],\n    });\n  };\n\n  // Handle form submission\n  const handleSubmit = async () => {\n    // Perform validation (you can add more validation logic here)\n    if (!formData.roomNumber || !formData.details || !formData.priority) {\n      alert('Please fill out all required fields.');\n      return;\n    }\n\n    try {\n      const formDataToSend = new FormData();\n      formDataToSend.append('taskType', formData.taskType);\n      formDataToSend.append('roomNumber', formData.roomNumber);\n      formDataToSend.append('details', formData.details);\n      formDataToSend.append('priority', formData.priority);\n      if (formData.attachments) {\n        formDataToSend.append('attachments', formData.attachments);\n      }\n\n      // POST request to backend to create a new work order\n      await axios.post('/api/work-orders', formDataToSend, {\n        headers: { 'Content-Type': 'multipart/form-data' },\n      });\n\n      // Handle success\n      alert('Work order created successfully!');\n      handleClose(); // Close the modal\n      onWorkOrderSubmit(); // Refresh work orders list after submission\n    } catch (error) {\n      console.error('Error submitting the work order:', error);\n      alert('Failed to create the work order. Please try again.');\n    }\n  };\n\n  return (\n    <Dialog open={open} onClose={handleClose}>\n      <DialogTitle>Create New Work Order</DialogTitle>\n      <DialogContent>\n        <DialogContentText>\n          Please fill out the form to create a new work order.\n        </DialogContentText>\n\n        {/* Task Type */}\n        <TextField\n          select\n          label=\"Task Type\"\n          name=\"taskType\"\n          value={formData.taskType}\n          onChange={handleChange}\n          fullWidth\n          margin=\"normal\"\n        >\n          {taskTypes.map((option) => (\n            <MenuItem key={option} value={option}>\n              {option}\n            </MenuItem>\n          ))}\n        </TextField>\n\n        {/* Room Number */}\n        <TextField\n          label=\"Room Number\"\n          name=\"roomNumber\"\n          value={formData.roomNumber}\n          onChange={handleChange}\n          required\n          fullWidth\n          margin=\"normal\"\n        />\n\n        {/* Details */}\n        <TextField\n          label=\"Details\"\n          name=\"details\"\n          value={formData.details}\n          onChange={handleChange}\n          required\n          fullWidth\n          multiline\n          rows={4}\n          margin=\"normal\"\n        />\n\n        {/* Priority */}\n        <TextField\n          select\n          label=\"Priority\"\n          name=\"priority\"\n          value={formData.priority}\n          onChange={handleChange}\n          required\n          fullWidth\n          margin=\"normal\"\n        >\n          {priorities.map((option) => (\n            <MenuItem key={option} value={option}>\n              {option}\n            </MenuItem>\n          ))}\n        </TextField>\n\n        {/* Attachments */}\n        <input\n          type=\"file\"\n          name=\"attachments\"\n          onChange={handleFileChange}\n          style={{ marginTop: '15px' }}\n        />\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={handleClose} color=\"secondary\">\n          Cancel\n        </Button>\n        <Button onClick={handleSubmit} color=\"primary\">\n          Submit\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n};\n\nexport default WorkOrderFormModal;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}